Лабораторная работа 4. Синхронизация потоков

Цель работы
Разобраться с синхронизацией потоков и посмотреть, как возникает взаимоблокировка, и как её убрать.

Что сделано

1) Обедающие философы
Есть две версии запуска.
StartWithDeadlock показывает ситуацию, когда все берут левую вилку и дальше ждут правую.
StartWithoutDeadlock решает проблему тем, что вилки берутся всегда в одном порядке: сначала вилка с меньшим номером, потом с большим. Из-за этого не образуется цикл ожидания.

2) Спящий парикмахер
Парикмахер спит, когда очередь пустая. Клиенты приходят и либо садятся ждать, либо уходят, если мест нет.
Для синхронизации использованы SemaphoreSlim и Mutex, очередь сделана через ConcurrentQueue.

3) Производитель и потребитель
Буфер ограниченного размера. Производители кладут элементы, потребители забирают.
В качестве буфера используется BlockingCollection, а SemaphoreSlim помогает не выходить за границы заполнения.

Запуск
Сборка: dotnet build
Запуск: dotnet run --project lab4.csproj
Тесты: dotnet test

Вопросы для защиты
1) Что такое race condition. Пример из задач.
2) Чем отличается deadlock от starvation и где это может появиться.
3) Что такое критическая секция и где она в коде.
4) Разница между lock и Monitor, Mutex и SemaphoreSlim, Semaphore и SemaphoreSlim.

